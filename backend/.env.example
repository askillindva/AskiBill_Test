# AskiBill Python Backend Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Connection (choose one method)

# Method 1: Full DATABASE_URL (recommended)
DATABASE_URL=postgresql://username:password@localhost:5432/askibill
PYTHON_DATABASE_URL=postgresql+asyncpg://username:password@localhost:5432/askibill

# Method 2: Individual components (will auto-build URLs)
PGHOST=localhost
PGPORT=5432
PGUSER=askibill_user
PGPASSWORD=your_secure_password
PGDATABASE=askibill

# Database Pool Configuration
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME=AskiBill
VERSION=2.0.0
ENVIRONMENT=development
DEBUG=true

# Server Configuration
UVICORN_HOST=0.0.0.0
UVICORN_PORT=8000
UVICORN_WORKERS=1
UVICORN_RELOAD=true

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
SECRET_KEY=your-super-secret-jwt-key-min-32-characters-long
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# Password Security
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_REQUIRE_NUMBERS=true

# =============================================================================
# CORS & SECURITY
# =============================================================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,https://yourdomain.com
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com

# =============================================================================
# BANKING API CONFIGURATION
# =============================================================================
# Setu API (Primary Account Aggregator)
SETU_API_KEY=your-setu-api-key
SETU_BASE_URL=https://sandbox.setu.co
SETU_CLIENT_ID=your-setu-client-id
SETU_CLIENT_SECRET=your-setu-client-secret

# Yodlee API (Alternative Provider)
YODLEE_API_KEY=your-yodlee-api-key
YODLEE_BASE_URL=https://sandbox.api.yodlee.com/ysl
YODLEE_CLIENT_ID=your-yodlee-client-id
YODLEE_CLIENT_SECRET=your-yodlee-client-secret

# Anumati API (RBI Licensed AA)
ANUMATI_API_KEY=your-anumati-api-key
ANUMATI_BASE_URL=https://sandbox.anumati.com
ANUMATI_CLIENT_ID=your-anumati-client-id
ANUMATI_CLIENT_SECRET=your-anumati-client-secret

# Banking API Settings
BANK_API_TIMEOUT=30
BANK_API_RETRY_COUNT=3
BANK_SYNC_INTERVAL_HOURS=24

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SSL=false

# Session Storage
SESSION_EXPIRE_HOURS=168  # 7 days
SESSION_CLEANUP_INTERVAL=3600  # 1 hour

# =============================================================================
# BACKGROUND TASKS (CELERY)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TIMEZONE=Asia/Kolkata
CELERY_TASK_ROUTES={}

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# SMTP Settings
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
EMAIL_FROM=noreply@askibill.com

# Email Templates
EMAIL_TEMPLATES_DIR=templates/emails
SEND_WELCOME_EMAIL=true
SEND_RESET_EMAIL=true

# =============================================================================
# ENCRYPTION & DATA SECURITY
# =============================================================================
# Data Encryption (for sensitive fields)
ENCRYPTION_KEY=your-32-byte-encryption-key-base64-encoded
CRYPTO_ALGORITHM=AES-256-GCM

# File Upload Security
UPLOAD_DIR=uploads
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,csv

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# SMS/WhatsApp (Twilio)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Push Notifications
FCM_SERVER_KEY=your-fcm-server-key
FCM_PROJECT_ID=your-firebase-project-id

# Apple Push Notifications
APNS_KEY_ID=your-apns-key-id
APNS_TEAM_ID=your-apple-team-id
APNS_PRIVATE_KEY_PATH=path/to/apns-private-key.p8

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/askibill.log
LOG_ROTATION=daily

# Error Tracking (Sentry)
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Metrics & Analytics
ENABLE_METRICS=true
METRICS_PORT=8001

# =============================================================================
# API DOCUMENTATION
# =============================================================================
ENABLE_DOCS=true
DOCS_URL=/docs
REDOC_URL=/redoc
OPENAPI_URL=/openapi.json

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
# Test Database
TEST_DATABASE_URL=postgresql+asyncpg://username:password@localhost:5432/askibill_test

# Development Settings
ENABLE_DEBUG_TOOLBAR=true
RELOAD_ON_CHANGE=true
AUTO_RELOAD=true

# =============================================================================
# DOCKER ENVIRONMENT
# =============================================================================
# Override for Docker Compose
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
REDIS_HOST=redis
REDIS_PORT=6379

# Docker Health Checks
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3